@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base ===== */
@layer base {
  :root {
    --accent: #00F0FF;
    --accent-glow: rgba(0, 240, 255, 0.4);
  }

  body {
    background-color: #0A0A0F;
    color: #E4E4E7;
    font-family: var(--font-geist), system-ui, sans-serif;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='20' viewBox='0 0 16 20'%3E%3Cpath d='M0 0L12 10L5 10L8 18L6 19L3 11L0 14Z' fill='%23E4E4E7' stroke='%230A0A0F' stroke-width='1'/%3E%3C/svg%3E") 0 0, auto;
  }

  ::selection {
    background-color: var(--accent);
    color: #0A0A0F;
  }
}

/* ===== Accent section overrides ===== */
.accent-cyan { --accent: #00F0FF; --accent-glow: rgba(0, 240, 255, 0.4); }
.accent-magenta { --accent: #FF00AA; --accent-glow: rgba(255, 0, 170, 0.4); }
.accent-green { --accent: #00FF88; --accent-glow: rgba(0, 255, 136, 0.4); }
.accent-orange { --accent: #FF6600; --accent-glow: rgba(255, 102, 0, 0.4); }

/* ===== Marquee ===== */
@keyframes marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}
.marquee-track {
  display: flex;
  width: max-content;
  animation: marquee 60s linear infinite;
}

/* Pixelated blur via scale trick */
.pixel-blur {
  filter: blur(0.3px);
  image-rendering: pixelated;
  transform: scale(1.5);
  transform-origin: center;
  overflow: hidden;
}
.pixel-blur > * {
  transform: scale(0.6667);
  transform-origin: center;
  filter: blur(1.2px) contrast(1.5);
}
.group:hover .pixel-blur {
  filter: none;
  transform: scale(1);
}
.group:hover .pixel-blur > * {
  transform: scale(1);
  filter: none;
}

/* ===== Scrollbar hide ===== */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ===== Mask utilities ===== */
.mask-fade {
  mask-image: linear-gradient(to bottom, transparent 0%, black 25%, black 75%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 25%, black 75%, transparent 100%);
}

/* ===== Neon glow utilities ===== */
.neon-border {
  border: 1px solid var(--accent);
  box-shadow: 0 0 8px var(--accent-glow), inset 0 0 8px rgba(0, 0, 0, 0.3);
  transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.neon-border:hover {
  box-shadow: 0 0 20px var(--accent-glow), 0 0 40px var(--accent-glow), inset 0 0 8px rgba(0, 0, 0, 0.3);
}

.neon-text {
  color: var(--accent);
  text-shadow: 0 0 10px var(--accent-glow), 0 0 20px var(--accent-glow);
}

/* ===== Glitch text effect ===== */
.glitch-wrapper {
  position: relative;
  display: inline-block;
}

.glitch-wrapper::before,
.glitch-wrapper::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  pointer-events: none;
}

.glitch-wrapper::before {
  color: var(--accent);
  z-index: -1;
}

.glitch-wrapper::after {
  color: #FF00AA;
  z-index: -1;
}

.glitch-wrapper:hover::before {
  opacity: 0.8;
  animation: glitch-1 0.3s steps(5) forwards;
}

.glitch-wrapper:hover::after {
  opacity: 0.8;
  animation: glitch-2 0.3s steps(5) forwards;
}

@keyframes glitch-1 {
  0% { clip-path: inset(0 0 0 0); transform: translate(0); }
  20% { clip-path: inset(20% 0 60% 0); transform: translate(-3px, 1px); }
  40% { clip-path: inset(60% 0 10% 0); transform: translate(3px, -1px); }
  60% { clip-path: inset(40% 0 40% 0); transform: translate(-2px, 2px); }
  80% { clip-path: inset(10% 0 80% 0); transform: translate(2px, -2px); }
  100% { clip-path: inset(0 0 0 0); transform: translate(0); opacity: 0; }
}

@keyframes glitch-2 {
  0% { clip-path: inset(0 0 0 0); transform: translate(0); }
  20% { clip-path: inset(70% 0 10% 0); transform: translate(3px, -1px); }
  40% { clip-path: inset(10% 0 70% 0); transform: translate(-3px, 1px); }
  60% { clip-path: inset(50% 0 30% 0); transform: translate(2px, -2px); }
  80% { clip-path: inset(30% 0 50% 0); transform: translate(-2px, 2px); }
  100% { clip-path: inset(0 0 0 0); transform: translate(0); opacity: 0; }
}

/* ===== Scan lines overlay ===== */
.scan-lines::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9998;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.03) 2px,
    rgba(0, 0, 0, 0.03) 4px
  );
}

/* ===== Grain overlay (dark mode - screen blend) ===== */
.grain-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: 0.035;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
  mix-blend-mode: screen;
}

/* ===== Cursor blink ===== */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.animate-blink {
  animation: blink 1s step-end infinite;
}

/* ===== Game button utility ===== */
.game-btn {
  font-family: var(--font-mono), monospace;
  font-size: 0.75rem;
  background-color: #12121A;
  border: 1px solid #1E1E2E;
  color: #E4E4E7;
  padding: 0.375rem 1rem;
  transition: border-color 0.2s, color 0.2s;
  cursor: pointer;
}

.game-btn:hover {
  border-color: var(--accent);
  color: var(--accent);
}

/* ===== CRT Vignette ===== */
.crt-vignette {
  position: fixed;
  inset: 0;
  z-index: 9997;
  pointer-events: none;
  background: radial-gradient(ellipse at center, transparent 50%, rgba(0, 0, 0, 0.7) 100%);
}

/* ===== Aurora orb drift keyframes ===== */
@keyframes orb-drift-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(60px, -40px) scale(1.1); }
  50% { transform: translate(-30px, 50px) scale(0.95); }
  75% { transform: translate(-50px, -20px) scale(1.05); }
}

@keyframes orb-drift-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(-50px, 30px) scale(1.05); }
  50% { transform: translate(40px, -60px) scale(1.1); }
  75% { transform: translate(20px, 40px) scale(0.9); }
}

@keyframes orb-drift-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(30px, 60px) scale(0.95); }
  50% { transform: translate(-60px, -30px) scale(1.1); }
  75% { transform: translate(40px, -50px) scale(1.05); }
}

@keyframes orb-drift-4 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(-40px, -50px) scale(1.1); }
  50% { transform: translate(50px, 30px) scale(0.95); }
  75% { transform: translate(-20px, 60px) scale(1.05); }
}

@keyframes orb-drift-5 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(50px, 40px) scale(1.05); }
  50% { transform: translate(-40px, -50px) scale(1.1); }
  75% { transform: translate(30px, -30px) scale(0.95); }
}

/* ===== Memorial photo (grayscale â†’ color on hover) ===== */
.memorial-photo {
  filter: grayscale(100%);
  transition: filter 0.5s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  border: 1px solid #1E1E2E;
}

.memorial-photo:hover {
  filter: grayscale(0%);
  border-color: var(--accent);
  box-shadow: 0 0 12px var(--accent-glow);
}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce) {
  .glitch-wrapper::before,
  .glitch-wrapper::after {
    display: none !important;
  }

  .scan-lines::after {
    display: none !important;
  }

  .crt-vignette {
    display: none !important;
  }

  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
